<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025/12 ç¦åº·æ´»å‹•-é¦´é¹¿å ±ä½³éŸ³ãƒ»ä¹å“ä¾›ç¾å‘³</title>
    <link rel="shortcut icon" type="image/x-icon" href="/takoiscute/public/TAKO.ico">
    <link rel="stylesheet icon" type="text/css" href="/takoiscute/public/easyui/metro-red/easyui.css">
    <link rel="stylesheet icon" type="text/css" href="/takoiscute/public/bootstrap/bootstrap.min.css">
    <link rel="stylesheet icon" type="text/css" href="/takoiscute/public/bootstrap/bootstrap-icons.min.css">
    <link rel="stylesheet icon" type="text/css" href="/takoiscute/public/sweetalert/sweetalert2.min.css">
    <link rel="stylesheet icon" type="text/css" href="/takoiscute/public/daterangepicker/daterangepicker.css">
    <link rel="stylesheet icon" type="text/css" href="/takoiscute/public/main/main.css">
</head>
<style>
    body {
        font-family: 'Noto Sans CJK TC', sans-serif;
        position: relative;
        /* é—œéµï¼šè®“ ::before å¯ä»¥ç›¸å°æ–¼ body å®šä½ */
        min-height: 100vh;
        /* ç¢ºä¿è‡³å°‘å¡«æ»¿è¦–çª—é«˜åº¦ */
        /* ğŸš¨ é—œéµï¼šç¢ºä¿ body èƒ½å¤ æ ¹æ“šå…§å®¹ç‰©è‡ªå‹•å¢åŠ é«˜åº¦ */
        height: auto;
        /* ç¢ºä¿ body è‡³å°‘å¡«æ»¿è¦–çª—é«˜åº¦ */
    }

    /* 2. å»ºç«‹ä¸€å€‹ç¨ç«‹çš„èƒŒæ™¯å±¤ (::before å½å…ƒç´ ) */
    body::before {
        /* è®“å®ƒå¡«æ»¿æ•´å€‹ body å€åŸŸ */
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;

        /* ğŸ¯ é—œéµä¿®æ­£ï¼šå¿…é ˆè¨­å®š height: 100% */
        /* é€™æœƒè®“èƒŒæ™¯å±¤çš„é«˜åº¦è·Ÿéš¨å…¶çˆ¶å…ƒç´  (body) çš„å¯¦éš›å…§å®¹é«˜åº¦ */
        height: 100%;

        /* åœ–ç‰‡æ¨£å¼è¨­å®š */
        background-image: url('/takoiscute/public/img/Dec/background.jpg');
        background-size: 1000px 800px;
        /* å›ºå®šåœ–ç‰‡å°ºå¯¸ */
        background-position: top left;
        background-repeat: repeat;
        /* åœ–ç‰‡é‡è¤‡é¡¯ç¤º */

        opacity: 0.6;
        z-index: -1;
    }


    .hero-section {
        position: relative;
        width: 100%;
        /* Full viewport height */
        background-size: cover;
        background-position: center;
        display: flex;
        align-items: center;
        color: #fff;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        /* For better text readability */
        overflow: hidden;
        /* ç¢ºä¿å½å…ƒç´ ä¸æœƒè¶…å‡ºå®¹å™¨ */
    }



    .hero-content {
        position: relative;
        z-index: 2;
        padding: 2rem;
    }

    .hero-title {
        font-size: 4rem;
        font-weight: bold;
        line-height: 1.2;
    }

    .hero-subtitle {
        font-size: 1.8rem;
        margin-top: 1rem;
        margin-bottom: 2rem;
    }

    .sprig-sky-text {
        font-size: 2.5rem;
        font-family: 'Playfair Display', serif;
        /* Or any elegant font for "Sprig & Sky" */
        margin-top: 1rem;
    }

    .media_sm {
        display: none;
    }

    /* ç•¶è¢å¹•å¯¬åº¦å°æ–¼ç­‰æ–¼ 768px æ™‚ï¼Œé¡¯ç¤ºæ‰‹æ©Ÿç‰ˆæœå°‹æ¡†ï¼Œéš±è—é›»è…¦ç‰ˆæœå°‹æ¡† */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2rem;
        }

        .hero-subtitle {
            font-size: 1rem;
            margin-top: 0rem;
            margin-bottom: 0rem;
        }

        .sprig-sky-text {
            font-size: 1rem;
            margin-top: 0rem;
        }

        .media_bg {
            display: none;
        }

        .media_sm {
            display: block !important;
        }
    }

    .info-box {
        background-color: rgba(255, 255, 255, 0.1);
        /* Slightly transparent white background */
        padding: 1.5rem;
        border-radius: 0.5rem;
        backdrop-filter: blur(5px);
        /* Optional: adds a blur effect to the background */
        -webkit-backdrop-filter: blur(5px);
        /* Safari support */
    }

    .btn-custom {
        background-color: #e0b0ff;
        /* A light purple color similar to the image */
        border-color: #e0b0ff;
        color: #333;
        /* Darker text for contrast */
        padding: 0.75rem 2rem;
        font-size: 1.2rem;
        border-radius: 2rem;
        /* Rounded corners */
    }

    .btn-custom:hover {
        background-color: #cc99ff;
        border-color: #cc99ff;
        color: #333;
    }

    /* ç¢ºä¿åœ–ç‰‡æœ‰å›ºå®šé«˜åº¦ä¸”ä¸è®Šå½¢ */
    .food-card-img {
        height: 180px;
        /* è¨­ç½®æ‚¨å¸Œæœ›çš„åœ–ç‰‡é«˜åº¦ï¼Œä¾‹å¦‚ 180px */
        object-fit: cover;
        /* åœ–ç‰‡æœƒè¢«è£åˆ‡ä»¥å¡«æ»¿æŒ‡å®šçš„é«˜åº¦å’Œå¯¬åº¦ */
        width: 100%;
        /* ç¢ºä¿åœ–ç‰‡å¯¬åº¦ä½”æ»¿å¡ç‰‡ */
    }

    .floating-cart {
        position: fixed;
        /* è®“å®ƒç›¸å°æ–¼è¦–å£æ‡¸æµ®å›ºå®š */
        bottom: 20px;
        /* èª¿æ•´è·é›¢åº•éƒ¨çš„é«˜åº¦ */
        right: 20px;
        /* èª¿æ•´è·é›¢å³å´çš„è·é›¢ */
        z-index: 1000;
        /* ç¢ºä¿å®ƒåœ¨å…¶ä»–å…§å®¹ä¹‹ä¸Š */
        width: 60px;
        /* è¨­å®šåœ“å½¢å®¹å™¨çš„å¯¬åº¦ */
        height: 60px;
        /* è¨­å®šåœ“å½¢å®¹å™¨çš„é«˜åº¦ */
        border-radius: 50%;
        /* ä½¿å…¶è®Šæˆåœ“å½¢ */
        background-color: white;
        /* **æ–°å¢ï¼šç™½è‰²èƒŒæ™¯** */
        display: flex;
        /* ä½¿ç”¨ Flexbox è®“åœ–ç¤ºåœ¨åœ“å½¢ä¸­å±…ä¸­ */
        justify-content: center;
        /* æ°´å¹³å±…ä¸­ */
        align-items: center;
        /* å‚ç›´å±…ä¸­ */
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        /* é¸å¡«ï¼šæ·»åŠ ä¸€å€‹å¾®å¦™çš„é™°å½± */
    }

    .floating-cart a {
        position: relative;
        /* **é—œéµ**ï¼šä½¿å…¶æˆç‚ºå¾½ç« å®šä½çš„åƒè€ƒé» */
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        text-decoration: none;
        color: inherit;
    }

    .floating-cart i {
        font-size: 30px;
        color: #333;
    }

    /* **æ–°åŠ çš„è³¼ç‰©è»Šå¾½ç« æ¨£å¼** */
    .cart-badge {
        position: absolute;
        /* ç›¸å°æ–¼ .floating-cart a å®šä½ */
        top: 0px;
        /* èª¿æ•´ä½ç½®ï¼Œä½¿å…¶é¡¯ç¤ºåœ¨å³ä¸Šè§’ */
        right: 0px;
        background-color: red;
        /* ç´…è‰²èƒŒæ™¯ */
        color: white;
        /* ç™½è‰²æ–‡å­— */
        border-radius: 50%;
        /* åœ“å½¢ */
        padding: 2px 6px;
        /* èª¿æ•´å…§é‚Šè·ï¼Œè®“æ•¸å­—æœ‰è¶³å¤ ç©ºé–“ */
        font-size: 0.75em;
        /* æ–‡å­—å¤§å°ï¼Œç›¸å°çˆ¶å…ƒç´ å­—é«”å¤§å° */
        min-width: 20px;
        /* æœ€å°å¯¬åº¦ï¼Œç¢ºä¿å–®å€‹æ•¸å­—ä¹Ÿæ˜¯åœ“çš„ */
        text-align: center;
        /* æ–‡å­—å±…ä¸­ */
        line-height: 1;
        /* è¡Œé«˜ç‚º1ï¼Œå‚ç›´å±…ä¸­æ–‡å­— */
        font-weight: bold;
        /* å­—é«”åŠ ç²— */
    }

    /* é¸å¡«ï¼šæ·»åŠ æ‡¸åœæ•ˆæœ */
    .floating-cart:hover {
        opacity: 0.9;
        /* æ‡¸åœæ™‚ç•¥å¾®è®Šé€æ˜ */
        cursor: pointer;
        /* æ‡¸åœæ™‚é¼ æ¨™è®Šç‚ºæ‰‹å‹ */

    }

    /* éš±è—åŸç”Ÿ radio æŒ‰éˆ• */
    .hidden-radio {
        display: none;
    }

    /* å®¹å™¨æ¨£å¼ */
    .option-group {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        /* é¸é …ä¹‹é–“çš„é–“è· */
        margin-bottom: 10px;
        /* æ¯çµ„é¸é …ï¼ˆç”œåº¦/å†°åº¦ï¼‰ä¹‹é–“çš„é–“è· */
    }

    /* å¯é»æ“Šçš„ Label æ¨£å¼ (æ¨¡æ“¬æŒ‰éˆ•) */
    .option-label-radio {
        background-color: #f0f0f0;
        /* é è¨­æ·ºç°è‰²èƒŒæ™¯ */
        color: #333;
        /* é è¨­æ–‡å­—é¡è‰² */
        padding: 5px 5px;
        border-radius: 15px;
        /* åœ“è§’ */
        cursor: pointer;
        /* é¼ æ¨™è®Šæˆæ‰‹å‹ */
        transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        /* éæ¸¡æ•ˆæœ */
        border: 1px solid #ddd;
        /* é è¨­é‚Šæ¡† */
        white-space: nowrap;
        /* é˜²æ­¢æ–‡å­—æ›è¡Œ */
        font-size: 1rem;
        /* ç¢ºä¿ label å…§å®¹ä¸æœƒè¢«é¸ä¸­ */
        -webkit-user-select: none;
        /* Safari */
        -moz-user-select: none;
        /* Firefox */
        -ms-user-select: none;
        /* Internet Explorer/Edge */
        user-select: none;
        /* æ¨™æº–èªæ³• */
    }

    .option-label-radio:hover {
        background-color: #e0e0e0;
        /* é¼ æ¨™æ‡¸åœæ™‚é¡è‰²è®Šæ·± */
    }

    /* ç•¶ç›¸é—œè¯çš„ hidden-radio è¢«é¸ä¸­æ™‚ï¼Œæ‡‰ç”¨åˆ° label çš„æ¨£å¼ */
    /* ä½¿ç”¨ CSS é„°è¿‘é¸æ“‡å™¨ (~) ä¾†é¸ä¸­ input å¾Œé¢çš„ label */
    .hidden-radio:checked+.option-label-radio {
        background-color: #da5259;
        /* é¸ä¸­æ™‚çš„æ·±ç´«è‰²èƒŒæ™¯ */
        color: white;
        /* é¸ä¸­æ™‚çš„ç™½è‰²æ–‡å­— */
        border-color: #ad0d0d;
        /* é¸ä¸­æ™‚çš„é‚Šæ¡†é¡è‰²èˆ‡èƒŒæ™¯ä¸€è‡´ */
    }

    .required {
        color: red;
        font-weight: bold;
    }

    .custom-width {
        width: 90% !important;
    }



    .container {
        position: relative;
        /* å¿…é ˆè¨­å®š position æ‰èƒ½ä½¿ç”¨ z-index */
        z-index: 1;
        /* ç¢ºä¿å…§å®¹åœ¨èƒŒæ™¯ (z-index: -1) ä¹‹ä¸Š */
    }

    @media (min-width: 992px) {

        /* lg ä»¥ä¸Šçš„è£ç½® */
        .custom-width {
            width: 50% !important;
        }
    }
</style>

<body>
    <div class="container custom-width">
        <div class="modal-content">
            <div class="modal-header" style="flex-direction: column;align-items: center;">
                <h3 class="modal-title"
                    style="text-align: center;font-family:'JasonHandwriting2';color:#ad0d0d;font-size: 2vw;">2025/12
                    ç¦åº·æ´»å‹•-é¦´é¹¿å ±ä½³éŸ³ãƒ»ä¹å“ä¾›ç¾å‘³</h3>
                <img src="/takoiscute/public/img/Dec/banner.gif" alt="" style="width: 100%; height: auto;display: block;">
            </div>
            <div class="modal-body ">
                <div class="accordion" id="accordion_food">
                    <div class="card">
                        <div class="card-header">
                            <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                                data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                ã€‰ä¹å“æ–¹åœ“ - åƒé£½æ‰æœ‰åŠ›æ°£å¹¹æ´»
                            </button>
                        </div>
                        <div id="collapseOne" class="collapse " aria-labelledby="headingOne"
                            data-parent="#accordion_food">
                            <div class="card-body" id="food_cards">

                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion" id="accordion_drink">
                    <div class="card">
                        <div class="card-header">
                            <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                                data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                ã€‰Mateas é®®å¥¶èŒ¶æ²™é¾- å–å¥½æ‰æœ‰ç²¾ç¥å¥®é¬¥
                            </button>
                        </div>
                        <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo"
                            data-parent="#accordion_drink">
                            <div class="card-body">
                                <div class="input-group" style="padding: 0px 1.25rem;">
                                    <span class="input-group-text" style="font-size:20px;width:30%">è«‹é¸æ“‡æ‚¨çš„é£²æ–™</span>
                                    <input type="text" class="easyui-combobox" id="drink_list">
                                </div>
                                <div class="card-body" id="drink_cards">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer ">
                <button type="submit" class="btn btn-info" onClick="$('#cart_form').modal('toggle')">é€å‡ºè¨‚å–®</button>
            </div>
        </div>
    </div>
    <!-- ç¢ºèªè¨‚å–® -->
    <div class="modal fade" id="cart_form" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">æˆ‘çš„è¨‚å–®å…§å®¹</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="card">
                        <div class="card-header">
                            ã€‰è¨‚é¤äººè³‡è¨Š
                        </div>
                        <div class="card-body">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">æ‰€å±¬æ¨“å±¤</span>
                                </div>
                                <input id="select_floor" type="text" class="form-control easyui-combobox"
                                    aria-label="Username" aria-describedby="basic-addon1" style="width: 500px;">
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">è¨‚è³¼å¤§å</span>
                                </div>
                                <input id="select_name" type="text" class="form-control easyui-combobox"
                                    aria-label="Username" aria-describedby="basic-addon1" style="width: 500px;">
                            </div>
                        </div>
                        <div class="card-header">
                            ã€‰è¨‚å–®è³‡è¨Š
                        </div>
                        <div class="card-body">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <td>é¤é»å…§å®¹:</td>
                                    </tr>
                                </thead>
                                <tbody id="order_list_ul">
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td> è¨‚å–®é‡‘é¡:$<span id="order_total"></span></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="Confirm(this)">ç¢ºå®šé€å‡º</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">æˆ‘å†æƒ³æƒ³</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="/takoiscute/public/main/main.js"></script>
<script type="text/javascript" src="/takoiscute/public/easyui/jquery.min.js"></script>
<script type="text/javascript" src="/takoiscute/public/easyui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="/takoiscute/public/easyui/locale/easyui-lang-zh_TW.js"></script>
<script type="text/javascript" src="/takoiscute/public/bootstrap/bootstrap.min.js"></script>
<script type="text/javascript" src="/takoiscute/public/sweetalert/sweetalert2.min.js"></script>
<script type="text/javascript" src="/takoiscute/public/daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="/takoiscute/public/jquery.actual-master/jquery.actual.min.js"></script>
<script type="text/javascript" src="/takoiscute/public/daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="/takoiscute/public/gas/gas.js"></script>
<script type="text/javascript" src="/takoiscute/public/animation/anime.min.js"></script>
<script type="text/javascript">
    // ä¹å“æ–¹åœ“çš„èœå–®
    const food_data = [
        {
            name: "é›²å—æ¤’é¦™é›",
            price: "390",
            about: "æ¡ç”¨å®Œæ•´é›è…¿è‚‰ï¼Œä»¥ç¨é–€é†¬æ–™é†ƒè£½ï¼Œå†ä½ä»¥èŠ±æ¤’ã€è”¥èŠ±ç­‰è¾›é¦™æ–™èª¿å‘³ï¼Œå£æ„Ÿè»Ÿå«©ï¼Œè¶…ç´šç¾å‘³ï¼",
        },
        {
            name: "ä¸»å»šç´…éº´è±¬æ’",
            price: "350",
            about: "ç‰¹é¸ç´…éº´é†¬ï¼Œä»¥é»ƒé‡‘æ¯”ä¾‹çš„ç§˜æ–¹å°‡æ•´å¡Šè±¬æ’é†ƒè£½ï¼Œå£æ„Ÿè»Ÿå«©ï¼Œçš®è–„è‚‰å¤šã€‚",
        },
        {
            name: "è”¥çˆ†æ²™æœ—ç‰›",
            price: "350",
            about: "åš´é¸ç´è¥¿è˜­é€²å£çš„æ²™æœ—ç‰›è‚‰ï¼Œæ­é…è”¥é¦™æå‘³ï¼Œè‚‰è³ªæ»‘å«©ï¼Œæ¯ä¸€å£éƒ½é®®ç”œå¤šæ±ï¼",
        },
        {
            name: "è”¥é¹½é¦™å«©é›",
            price: "350",
            about: "å°‡æ•´å¡Šé›èƒ¸è‚‰åˆ‡ç‰‡ï¼Œä½ä»¥ç‰¹è£½çš„è”¥é¹½é†¬æ‹Œå‹»ï¼Œè‚‰è³ªé®®å«©ï¼Œæ¸…çˆ½å¯å£ï¼Œçµ¦æ‚¨å¥åº·æ¸›è„‚çš„æ–°é¸æ“‡ï¼",
        },
        {
            name: "ä¸€å“èŠ±é›•é›",
            price: "370",
            about: "å°‡èŠ±é›•é…’çš„é†‡åšèˆ‡é›è‚‰çš„é®®ç”œç›¸çµåˆï¼Œé¦™æ°£å››æº¢ï¼Œæš–èº«æš–èƒƒï¼Œæ˜¯ä¸€é“ç›¸ç•¶ç¨ç‰¹çš„ç§æˆ¿èœï¼",
        },
        {
            name: "æª¸æª¬è’œé¦™è±¬",
            price: "370",
            about: "æ·¡æ·¡çš„æª¸æª¬æ°£å‘³åŠ ä¸Šè±¬è…¿è‚‰çš„é¦™æ°£ï¼Œå£å‘³é…¸ç”œä¸”ä¸è†©å£ï¼Œéå¸¸ç¨ç‰¹ï¼",
        },
        {
            name: "åš´é¸é¦¬é ­é­š",
            price: "390",
            about: "é¦¬é ­é­šæ˜¯å°ç£å¸¸è¦‹çš„æµ·é­šï¼Œä»¥æ–¹ç›´é ­å‹å¾—åã€‚æˆ‘å€‘ä¿ç•™é­šçš„é®®å‘³ï¼Œä¹¾ç…å¾—å¤–é…¥å…§å«©ã€‚",
        },
        {
            name: "ç´ ä¸‰æ¯æé®‘è‡(æ–¹ä¾¿ç´ )",
            price: "350",
            about: "é£½æ°´çš„æé®‘è‡ï¼Œç¸ˆç¹è‘—é¦™æ°£åè¶³çš„ä¹å±¤å¡”ï¼Œè¶…ç´šä¸‹é£¯ï¼",
        },
    ];


    const drink_data = {
        "æœŸé–“é™å®š": {
            "è˜¿èé®®å¥¶èŒ¶": { "size": ['L'], "price": 68, "iced": [-1, 0, 3], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
            "å¥¢â€§æ¾éœ²â€§çµ²çµ¨å·§å…‹åŠ›é®®å¥¶èŒ¶": { "size": ['M'], "price": 85, "iced": [-1, 99], "sugar": [1, 3], "addtions": {}, "milk": 0, },
            "æš®æ¢…å¾®å…‰": { "size": ['L'], "price": 60, "iced": [0, 3, 7], "sugar": [0, 1, 3], "addtions": { "ç™½ç‰çç ": 10, "èŒ¶ç‹å‡": 10, "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "æ¡‚èŠ±ç„™é¦™èœœ": { "size": ['L'], "price": 60, "iced": [0, 3, 7], "sugar": [99], "addtions": {}, "milk": 0, },
            "å¢¨éŸ»â€§å¯å¯é‡Œäº": { "size": ['L'], "price": 79, "iced": [99, -1], "sugar": [1, 3], "addtions": { "ç™½ç‰çç ": 0, }, "milk": 0, }
        },
        "å®Œç¾æ¯”ä¾‹": {
            "ç›§å“ˆå¨œé®®å¥¶èŒ¶": { "size": ['L'], "price": 68, "iced": [-1, 0, 3], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
            "åº·æé®®å¥¶èŒ¶": { "size": ['L'], "price": 68, "iced": [-1, 0, 3], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
            "MateasèŒ¶ç‹é®®å¥¶èŒ¶": { "size": ['L'], "price": 68, "iced": [-1, 0, 3], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
            "é»‘çƒé¾é®®å¥¶èŒ¶": { "size": ['L'], "price": 68, "iced": [-1, 0, 3], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
            "æ‹¾ç©—é®®å¥¶èŒ¶": { "size": ['L'], "price": 68, "iced": [-1, 0], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
            "æ‰‹åˆ·æŠ¹èŒ¶é®®å¥¶èŒ¶": { "size": ['M'], "price": 68, "iced": [-1, 3], "sugar": [0, 1, 3, 5], "addtions": { "ç™½ç‰çç ": 0, "èŒ¶ç‹å‡": 0, "è’Ÿè’»": 10, }, "milk": 1, },
        },
        "ååŸ·ç²¾é¸": {
            "ç¶“å…¸åº·æç´…èŒ¶": { "size": ['L'], "price": 35, "iced": [-1, 0, 3, 7], "sugar": [0, 1, 3], "addtions": { "ç™½ç‰çç ": 10, "èŒ¶ç‹å‡": 10, "è’Ÿè’»": 10, }, "milk": 0, },
            "MateasèŒ¶ç‹": { "size": ['L'], "price": 35, "iced": [-1, 0, 3, 7], "sugar": [0, 1, 3], "addtions": { "ç™½ç‰çç ": 10, "èŒ¶ç‹å‡": 10, "è’Ÿè’»": 10, }, "milk": 0, },
            "é›¨å‰é’èŒ¶": { "size": ['L'], "price": 35, "iced": [-1, 0, 3, 7], "sugar": [0, 1, 3], "addtions": { "ç™½ç‰çç ": 10, "èŒ¶ç‹å‡": 10, "è’Ÿè’»": 10, }, "milk": 0, },
            "äº«â€§æ‹¾ç©—": { "size": ['L'], "price": 35, "iced": [-1, 0, 3, 7], "sugar": [0, 1, 3], "addtions": { "ç™½ç‰çç ": 10, "èŒ¶ç‹å‡": 10, "è’Ÿè’»": 10, }, "milk": 0, },
            "é†‡â€§çƒé¾": { "size": ['L'], "price": 40, "iced": [-1, 0, 3, 7], "sugar": [0, 1, 3], "addtions": { "ç™½ç‰çç ": 10, "èŒ¶ç‹å‡": 10, "è’Ÿè’»": 10, }, "milk": 0, },
        },
        "å¤©ç„¶çµ•è‰²": {
            "é’èŒ¶é¤Šæ¨‚å¤š": { "size": ['L'], "price": 50, "iced": [0, 3, 7], "sugar": [0, 1, 3, 5], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "æŸšé¦™é›¨å‰é’èŒ¶": { "size": ['L'], "price": 60, "iced": [0, 3, 7], "sugar": [0, 1, 3, 5], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "æŸšé¦™è˜†è–ˆæœç²’": { "size": ['L'], "price": 65, "iced": [0, 3, 7], "sugar": [0, 1, 3, 5], "addtions": {}, "milk": 0, },
            "æŸšé¦™é¤Šæ¨‚å¤š": { "size": ['L'], "price": 70, "iced": [0, 3, 7], "sugar": [0, 1, 3, 5], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "é¦™æ©™é›¨å‰é’èŒ¶": { "size": ['L'], "price": 60, "iced": [0, 3, 7], "sugar": [0, 1, 3, 5], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "é¦™æ©™è˜†è–ˆæœç²’": { "size": ['L'], "price": 65, "iced": [0, 3, 7], "sugar": [0, 1, 3, 5], "addtions": {}, "milk": 0, },
            "é¦™æ©™é¤Šæ¨‚å¤š": { "size": ['L'], "price": 70, "iced": [], "sugar": [0, 1, 3], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "ç´…è˜‹": { "size": ['L'], "price": 55, "iced": [0, 3, 7], "sugar": [0, 1, 3], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "é’è˜‹": { "size": ['L'], "price": 55, "iced": [0, 3, 7], "sugar": [0, 1, 3], "addtions": { "è’Ÿè’»": 10, "è˜†è–ˆ": 10 }, "milk": 0, },
            "ç™½æ¡ƒçƒé¾": { "size": ['L'], "price": 63, "iced": [0, 3, 7], "sugar": [1, 3], "addtions": { "èŒ¶ç‹å‡": 0, }, "milk": 0, },
        },
    }


    // åªè¦é‡æ•´å°±æ˜¯è¦é‡æ–°å¡«å–®
    localStorage.clear();
    //-----------------------------------------------------------------------------------------
    // æ¯è¡Œï¼ˆæ¯å€‹ card-groupï¼‰é¡¯ç¤ºçš„å¡ç‰‡æ•¸é‡
    let group_size = 3;
    //-----------------------------------------------------------------------------------------
    // é£Ÿç‰©çš„è®€å–
    //-----------------------------------------------------------------------------------------
    // 1. å°‡ food_html è¨­ç‚ºä¸€å€‹ç©ºçš„ jQuery é›†åˆç‰©ä»¶
    let $food_html = $(""); // ç”¨ jQuery è®Šæ•¸æ…£ä¾‹ $ é–‹é ­
    let $currentRow; // ç”¨ä¾†å­˜æ”¾ç•¶å‰çš„ row å…ƒç´ 

    // è¿´åœˆéæ­·èœå–®è³‡æ–™
    food_data.forEach((food, index) => {
        // æ¯ 3 å€‹é …ç›®é–‹å§‹ä¸€å€‹æ–°çš„ row
        if (index % 3 === 0) {
            // çµæŸä¸Šä¸€å€‹ row (å¦‚æœå­˜åœ¨)
            if ($currentRow) {
                $food_html = $food_html.add($currentRow);
            }
            // å‰µå»ºæ–°çš„ row (jQuery Object)
            $currentRow = $('<div class="row"></div>');
        }

        // å‰µå»º Card çµæ§‹ (ä¾ç„¶æ˜¯ HTML å­—ä¸²)
        const cardHtml = `
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100">
                <img src="/takoiscute/public/img/Dec/${food.name}.jpg" class="card-img-top" alt="${food.name}">
                <div class="card-body">
                    <h5 class="card-title">${food.name}</h5>
                    <p class="card-text">${food.about}</p>
                    <input type="radio" name="food" id="food_${index}" value="${food.name}" required/>
                    <label style="font-size:1.5rem;margin-top:10px" for="food_${index}" data-price="${food.price}">$${food.price}</label>
                </div>
            </div>
        </div>
    `;

        $currentRow.append(cardHtml);
    });

    // å°‡æœ€å¾Œä¸€å€‹ row åŠ å…¥å®¹å™¨ä¸­
    if ($currentRow) {
        $food_html = $food_html.add($currentRow);
    }

    // å°‡æ‰€æœ‰ç”Ÿæˆçš„ HTML ä¸€æ¬¡æ€§æ’å…¥åˆ° DOM
    $("#food_cards").append($food_html);
    //-----------------------------------------------------------------------------------------
    // é£²æ–™çš„è®€å–
    //-----------------------------------------------------------------------------------------
    // ç”œåº¦ä»£ç¢¼è½‰æ›è¡¨ (Sugar Reference)
    const sugar_reference = {
        "99": { text: "å›ºå®šç”œåº¦", value: "fixed" },
        "0": { text: "ç„¡ç³–", value: "0" },
        "1": { text: "ä¸€åˆ†ç³–", value: "1" },
        "3": { text: "ä¸‰åˆ†ç³–", value: "3" },
        "5": { text: "äº”åˆ†ç³–", value: "5" },
    };

    // å†°å¡Šä»£ç¢¼è½‰æ›è¡¨ (Iced Reference)
    const ices_reference = {
        "99": { text: "å›ºå®šå†°é‡", value: "fixed" },
        "-1": { text: "æº«", value: "-1" },
        "0": { text: "å»å†°", value: "0" },
        "3": { text: "å¾®å†°", value: "3" },
        "7": { text: "å°‘å†°", value: "7" },
    };
    // å–å¾—å¤–æ¡†çš„å¯¬åº¦
    var modal_width = $("#collapseTwo").actual('width', { includeMargin: false });
    const drink_data_list = [];
    // è¿´åœˆéæ­·ç¬¬ä¸€å±¤ (é£²å“åˆ†é¡/ç¾¤çµ„åç¨±)
    // categoryName: "æœŸé–“é™å®š", "å®Œç¾æ¯”ä¾‹", ...
    for (const categoryName in drink_data) {
        if (drink_data.hasOwnProperty(categoryName)) {
            const drinksInCategory = drink_data[categoryName];

            // è¿´åœˆéæ­·ç¬¬äºŒå±¤ (å€‹åˆ¥é£²å“åç¨±)
            // drinkName: "è˜¿èé®®å¥¶èŒ¶", "å¥¢â€§æ¾éœ²â€§çµ²çµ¨å·§å…‹åŠ›é®®å¥¶èŒ¶", ...
            for (const drinkName in drinksInCategory) {
                if (drinksInCategory.hasOwnProperty(drinkName)) {
                    // æ ¹æ“š EasyUI combobox æ ¼å¼å»ºç«‹ç‰©ä»¶
                    drink_data_list.push({
                        value: drinkName, // ä½œç‚º combobox çš„å¯¦éš›å€¼
                        text: drinkName,  // ä½œç‚º combobox é¡¯ç¤ºçš„æ–‡å­—
                        group: categoryName // æ–°å¢ group å±¬æ€§ï¼Œç”¨æ–¼ EasyUI çš„ groupField
                        // å¯ä»¥é¸æ“‡æ€§åœ°åŠ å…¥ price, iced, sugar ç­‰å…¶ä»–è³‡è¨Š
                        // ...details: drinksInCategory[drinkName]
                    });
                }
            }
        }
    }
    // éæ­·å·¢ç‹€çµæ§‹å°‹æ‰¾é¸å®šçš„é£²æ–™è³‡æ–™
    function findDrinkData(drinkName) {
        // éæ­·æ‰€æœ‰é£²æ–™åˆ†é¡ (æœŸé–“é™å®š, å®Œç¾æ¯”ä¾‹, ...)
        for (const category in drink_data) {
            if (drink_data.hasOwnProperty(category)) {
                const drinks = drink_data[category];
                // æª¢æŸ¥åˆ†é¡ä¸­æ˜¯å¦å­˜åœ¨è©²é£²æ–™åç¨±
                if (drinks.hasOwnProperty(drinkName)) {
                    return drinks[drinkName]; // è¿”å›è©²é£²æ–™çš„è©³ç´°è³‡æ–™ç‰©ä»¶
                }
            }
        }
        return null; // å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› null
    }

    // æ ¹æ“šé£²æ–™è©³ç´°è³‡æ–™ç”Ÿæˆ HTML
    function generateDrinkCardHtml(drinkName, drinkDetails) {
        // åƒ¹æ ¼ä½¿ç”¨ format: ${é£²æ–™åƒ¹æ ¼}
        const price = drinkDetails.price;

        // --- è¼”åŠ©å‡½å¼ï¼šç”Ÿæˆé¸é … HTML (Radio/Checkbox) ---
        function generateOptionsHtml(optionType, optionsArrayOrObject, referenceMap = null) {
            let html = '';
            const nameAttribute = `${optionType}-option`; // ä¾‹å¦‚ size-option, sugar-option

            // è™•ç†é™£åˆ— (Size, Iced, Sugar)
            if (Array.isArray(optionsArrayOrObject)) {
                optionsArrayOrObject.forEach((code, index) => {
                    let display = code;
                    let value = code;

                    if (referenceMap) {
                        // ä½¿ç”¨åƒè€ƒè¡¨è½‰æ›ä»£ç¢¼
                        const ref = referenceMap[code];
                        if (ref) {
                            display = ref.text;
                            value = ref.value;
                        }
                    }

                    // è¨­å®šç¬¬ä¸€å€‹é¸é …ç‚ºé è¨­é¸ä¸­ (checked)
                    const isChecked = index === 0 ? 'checked' : '';

                    html += `
                    <input type="radio" id="${optionType}-${value}-${index}" name="${nameAttribute}"
                        value="${value}" class="hidden-radio" ${isChecked} required>
                    <label for="${optionType}-${value}-${index}" class="option-label-radio">${display}</label>
                `;
                });

                // è™•ç†åŠ æ–™ Addtions (ç‰©ä»¶)
                // è™•ç†åŠ æ–™ Addtions (ç‰©ä»¶)
            } else if (typeof optionsArrayOrObject === 'object' && optionsArrayOrObject !== null) {
                // ğŸ¯ ä¿®æ­£é» 1: ä½¿ç”¨ Radio Button å¯¦ç¾å–®é¸
                // æˆ‘å€‘éœ€è¦ç‚ºã€Œä¸åŠ æ–™ã€æ·»åŠ ä¸€å€‹é è¨­é¸é …

                // åˆå§‹åŒ–å–®é¸ HTMLï¼Œé¦–å…ˆåŠ å…¥ã€Œä¸åŠ æ–™ã€é¸é …
                html += `
                <input type="radio" id="${optionType}-none" name="${nameAttribute}"
                    value="ç„¡åŠ æ–™_0" class="hidden-radio" checked>
                <label for="${optionType}-none" class="option-label-radio">ä¸åŠ æ–™</label>
            `;

                // è¿´åœˆéæ­·åŠ æ–™é¸é …
                for (const [additionName, additionPrice] of Object.entries(optionsArrayOrObject)) {

                    const priceLabel = ` (+${additionPrice})`;

                    // ä½¿ç”¨ä¿®æ­£å¾Œçš„ ID è½‰æ›é‚è¼¯
                    let additionId = additionName.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]+/g, '_');
                    additionId = additionId.replace(/^_+|_+$/g, '');
                    const safeAdditionId = additionId || 'no_name';

                    const value = `${additionName}_${additionPrice}`;

                    // ğŸ¯ ä¿®æ­£é» 2: å°‡ type æ”¹ç‚º radio
                    html += `
                    <input type="radio" id="${optionType}-${safeAdditionId}" name="${nameAttribute}"
                        value="${value}" class="hidden-radio addition-radio">
                    <label for="${optionType}-${safeAdditionId}" class="option-label-radio">
                        ${additionName}${priceLabel} 
                    </label>
                `;
                }
            }
            return html;
        }
        // -----------------------------------------------------------------

        // é–‹å§‹ç”Ÿæˆä¸»å¡ç‰‡çµæ§‹
        let cardHtml = `
            <div class="card mb-3 selected-drink-card">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="/takoiscute/public/img/Dec/${drinkName}.png" class="card-img-top" alt="${drinkName}">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title text-center">${drinkName}</h5>
                            
                            <div class="mb-3 d-none">
                                <label class="form-label">é£²å“åƒ¹æ ¼:</label>
                                <input type="text" value="$${price}" id="base_price" name="drink_base_price" class="form-control" disabled style="font-weight: bold; width: 100px; display: inline-block;"/>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">ç¸½è¨ˆé‡‘é¡:</label>
                                <input type="text" value="$${price}" id="final_price" name="drink_final_price" class="form-control" disabled style="font-weight: bold;  width: 100px; display: inline-block;"/>
                            </div>
        `;

        // 1. å¤§å°é¸é … (Size)
        const sizeOptionsHtml = generateOptionsHtml('size', drinkDetails.size);
        if (sizeOptionsHtml) {
            cardHtml += `
            <div class="option-group mb-3" data-option-type="size">
                <label class="form-label d-block">é¸æ“‡å¤§å°:</label>
                ${sizeOptionsHtml}
            </div>
        `;
        }

        // 2. ç”œåº¦é¸é … (Sugar)
        const sugarOptionsHtml = generateOptionsHtml('sugar', drinkDetails.sugar, sugar_reference);
        if (sugarOptionsHtml) {
            cardHtml += `
            <div class="option-group mb-3" data-option-type="sugar">
                <label class="form-label d-block">é¸æ“‡ç”œåº¦:</label>
                ${sugarOptionsHtml}
            </div>
        `;
        }

        // 3. å†°å¡Šé¸é … (Iced)
        const iceOptionsHtml = generateOptionsHtml('ice', drinkDetails.iced, ices_reference);
        if (iceOptionsHtml) {
            cardHtml += `
            <div class="option-group mb-3" data-option-type="ice">
                <label class="form-label d-block">é¸æ“‡å†°å¡Š:</label>
                ${iceOptionsHtml}
            </div>
        `;
        }

        // 4. åŠ æ–™é¸é … (Addtions) - åªæœ‰ç•¶ milk=1 æ™‚æ‰é¡¯ç¤º
        const addtionsOptionsHtml = generateOptionsHtml('addtions', drinkDetails.addtions);
        if (addtionsOptionsHtml) {
            cardHtml += `
            <div class="option-group mb-3" data-option-type="addtions">
                <label class="form-label d-block">åŠ æ–™å€ (å¤šé¸):</label>
                ${addtionsOptionsHtml}
            </div>
        `;
        }

        // 5. ç‰›å¥¶é¸é … (Milk) - åªæœ‰ç•¶ milk=1 æ™‚æ‰é¡¯ç¤º
        if (drinkDetails.milk === 1) {
            // å‡è¨­é®®å¥¶åƒ¹æ ¼ç‚º 10ï¼Œä¸¦å°‡å…¶ç·¨ç¢¼åˆ° value å±¬æ€§ä¸­
            const milkPrice = 10;
            cardHtml += `
                <div class="option-group mb-3" data-option-type="milk">
                    <label class="form-label d-block">ç‰›å¥¶é¸é …:</label>
                    <input type="checkbox" id="milk-option-checkbox" name="milk-option" 
                        value="åŠ é®®å¥¶_${milkPrice}" class="hidden-radio milk-checkbox"> 
                    <label for="milk-option-checkbox" class="option-label-radio">å‡ç´šDr.Milké®®å¥¶(+${milkPrice})</label>
                </div>
            `;
        }

        cardHtml += `
                    </div> </div> </div> </div> `;

        return cardHtml;
    }


    // ä¸»å‡½å¼ï¼šè™•ç† combobox çš„ onChange äº‹ä»¶
    // ä¸»å‡½å¼ï¼šè™•ç† combobox çš„ onChange äº‹ä»¶
    function handleDrinkChange(drinkName) {
        const $drinkCardsContainer = $("#drink_cards");

        $drinkCardsContainer.empty();

        if (!drinkName) return;

        const selectedDrink = findDrinkData(drinkName);

        if (selectedDrink) {
            // 1. ç”Ÿæˆä¸¦æ’å…¥ HTML
            const html = generateDrinkCardHtml(drinkName, selectedDrink);
            $drinkCardsContainer.html(html);


            // 3. ğŸ¯ ç¶å®šäº‹ä»¶ (ä½¿ç”¨äº‹ä»¶å§”è¨—ç¢ºä¿å‹•æ…‹ç”Ÿæˆçš„å…ƒç´ ä¹Ÿèƒ½ç›£è½åˆ°)
            // ç›£è½åŠ æ–™é¸é … (radio) å’Œé®®å¥¶é¸é … (checkbox) çš„è®ŠåŒ–
            $drinkCardsContainer.off('change', 'input[name="addtions-option"], input[name="milk-option"]');
            $drinkCardsContainer.on('change', 'input[name="addtions-option"], input[name="milk-option"]', function () {
                calculateTotalPrice();
            });

            // 4. åŸ·è¡Œé¦–æ¬¡è¨ˆç®— (ç¢ºä¿é é¢è¼‰å…¥æ™‚åƒ¹æ ¼æ­£ç¢º)
            calculateTotalPrice();

        } else {
            $drinkCardsContainer.html('<p class="text-danger">æ‰¾ä¸åˆ°è©²é£²å“è³‡æ–™ã€‚</p>');
        }
    }


    $("#drink_list").combobox({
        width: modal_width * 0.6,
        data: drink_data_list,
        valueField: 'value',
        textField: 'text',
        groupField: 'group',
        onChange: function (Value) {
            handleDrinkChange(Value);
        }
    })

    /**
 * æ ¸å¿ƒè¨ˆç®—åŠŸèƒ½ï¼šè¨ˆç®—é¸ä¸­çš„åŠ æ–™å’Œé®®å¥¶ç¸½åƒ¹ï¼Œä¸¦æ›´æ–°é¡¯ç¤ºçš„æœ€çµ‚åƒ¹æ ¼ã€‚
 */
    function calculateTotalPrice() {
        // 1. å–å¾—é£²æ–™çš„åŸºæœ¬åƒ¹æ ¼
        // æˆ‘å€‘å‡è¨­åŸºæœ¬åƒ¹æ ¼å­˜å„²åœ¨ id="base_price" çš„ input ä¸­
        let basePriceText = $("#base_price").val();
        let totalPrice = parseInt(basePriceText.replace('$', '')) || 0; // ç§»é™¤ $ ç¬¦è™Ÿä¸¦è½‰ç‚ºæ•¸å­—

        // 2. è™•ç†åŠ æ–™å€ (Addtions) - Radio Button å–®é¸
        // é¸ä¸­çš„ radio value æ ¼å¼ç‚º: "åŠ æ–™åç¨±_åƒ¹æ ¼" (ä¾‹å¦‚: ç™½ç‰çç _10)
        const selectedAdditionValue = $('input[name="addtions-option"]:checked').val();

        if (selectedAdditionValue) {
            // å¾ value ä¸­æå–åƒ¹æ ¼
            const parts = selectedAdditionValue.split('_');
            const additionPrice = parseInt(parts[parts.length - 1]); // ç¢ºä¿å–å¾—æœ€å¾Œä¸€å€‹ "_" å¾Œçš„æ•¸å­—
            if (!isNaN(additionPrice)) {
                totalPrice += additionPrice;
            }
        }

        // 3. è™•ç†é®®å¥¶é¸é … (Milk) - Checkbox
        const $milkCheckbox = $('input[name="milk-option"]');

        if ($milkCheckbox.length > 0 && $milkCheckbox.is(':checked')) {
            const milkValue = $milkCheckbox.val(); // å–å¾— value: "åŠ é®®å¥¶_10"

            // å¾ value ä¸­æå–åƒ¹æ ¼
            const parts = milkValue.split('_');
            const milkPrice = parseInt(parts[parts.length - 1]);

            if (!isNaN(milkPrice)) {
                totalPrice += milkPrice;
            }
        }

        // 4. æ›´æ–°æœ€çµ‚åƒ¹æ ¼é¡¯ç¤º
        $("#final_price").val(`$${totalPrice}`);
    }


    //-----------------------------------------------------------------------------------------
    // è³¼ç‰©è»Šçš„é–‹å•Ÿ
    //-----------------------------------------------------------------------------------------
    var food_ck = false;
    var drink_ck = false;
    $('#cart_form').on('show.bs.modal', function (event) {
        var total = 0;
        /*---------------------------------------------*/
        // è®€å–åˆ—è¡¨ï¼Œä¸¦ä¾ç…§å»ºç«‹æ™‚é–“å…ˆæ’åº
        /*---------------------------------------------*/
        var form_data = GetGasData("12æœˆè¡¨å–®å›æ‡‰");
        // å°‡è³‡æ–™è½‰åŒ–ç‚ºå¯è®€å–çš„è³‡æ–™
        var [header, ...data] = form_data;
        form_data = data
            .map((row) =>
                header.reduce((acc, key, index) => ({ ...acc, [key]: row[index] }), {})
            );
        const remainingMembers = {};
        const reportedMembersByFloor = {};
        // 1. å»ºç«‹å·²å ±åˆ°äººå“¡çš„å¿«é€ŸæŸ¥æ‰¾çµæ§‹
        // éæ­· form_dataï¼Œå°‡å·²å ±åˆ°çš„äººå“¡æŒ‰æ¨“å±¤æ­¸é¡
        form_data.forEach(person => {
            let floorKey = person.order_floor;
            if (!reportedMembersByFloor[floorKey]) {
                reportedMembersByFloor[floorKey] = new Set(); // ä½¿ç”¨ Set é€²è¡Œé«˜æ•ˆæŸ¥æ‰¾
            }
            reportedMembersByFloor[floorKey].add(person.order_name);
        });

        // 2. éæ­· member_listï¼Œæ‰¾å‡ºæ¯å€‹æ¨“å±¤å‰©é¤˜çš„äºº
        for (const floorKey in member_list) {
            if (member_list.hasOwnProperty(floorKey)) {
                const floorMembers = member_list[floorKey];
                const currentReportedMembers = reportedMembersByFloor[floorKey] || new Set(); // å¦‚æœè©²æ¨“å±¤æ²’æœ‰äººå ±åˆ°ï¼Œå‰‡ç‚ºç©º Set

                const remainingInThisFloor = [];
                floorMembers.forEach(member => {
                    if (!currentReportedMembers.has(member)) {
                        remainingInThisFloor.push(member);
                    }
                });
                remainingMembers[floorKey] = remainingInThisFloor;
            }
        }

        // æ¯”å°ä¸€ä¸‹æ¯å€‹æ¨“å±¤å‰©é¤˜çš„äººæ•¸
        // ä¾ç…§å‰©é¤˜äººæ•¸æº–å‚™ data
        let loadData_floor = [];
        for (let floor in remainingMembers) {
            let data = {};
            data.id = floor;
            data.text = floor;
            loadData_floor.push(data);
        }
        $("#select_floor").combobox({
            required: true,
            editable: false,
            panelHeight: 'auto',
            panelMaxHeight: '335',
            valueField: 'id',
            textField: 'text',
            data: loadData_floor,
            onChange: function (newValue, oldValue) {
                if (newValue !== oldValue) {
                    $("#select_name").combobox("setValue", "");
                    data = remainingMembers[newValue].map((x) => { return { id: x, text: x } });
                }
                $("#select_name").combobox("loadData", data);
            }
        })
        $("#select_name").combobox({
            required: true,
            editable: false,
            panelHeight: 'auto',
            panelMaxHeight: '250',
            valueField: 'id',
            textField: 'text',
            idField: "id",
            textField: "text",
        })
        /*---------------------------------------------*/
        // é»é¤æ¸…å–®
        /*---------------------------------------------*/
        order_list_html = ``;
        order_total = 0;
        // å–å¾—é£Ÿç‰©æ¸…å–®
        var food_check = $("[name='food']:checked");
        if (food_check.length > 0) {
            food_name = $("[name='food']:checked").val();
            food_price = $("[name='food']:checked").next().data('price');
            order_list_html += `
                <tr>
                    <td id="order_food">${food_name}ï¼Œ$${food_price}</td>
                </tr>
            `;
            order_total += parseInt(food_price);
            food_ck = true;
        }
        // å–å¾—é£²æ–™æ¸…å–®
        var $drink_div = $("#drink_cards").find(".card-body");

        var drink_name = $("#drink_list").combobox("getValue")
        if (drink_name !== "") {
            var drink_size = $drink_div.find('[data-option-type="size"]').find('input:checked').next('label').text() ?? '';
            var drink_sugar = $drink_div.find('[data-option-type="sugar"]').find('input:checked').next('label').text() ?? '';
            var drink_ice = $drink_div.find('[data-option-type="ice"]').find('input:checked').next('label').text() ?? '';
            var drink_addtions = $drink_div.find('[data-option-type="addtions"]').find('input:checked').next('label').text() ?? '';
            var drink_milk = $drink_div.find('[data-option-type="milk"]').find('input:checked').next('label').text() ?? '';
            var drink_price = $drink_div.find('#final_price').val();
            // ç´…èŒ¶(L)ç„¡ç³–å»å†°ï¼Œä¸åŠ æ–™,$60
            order_list_html += `
            <tr>
                <td id="order_drink">
                    ${drink_name}(${drink_size})${drink_sugar}${drink_ice}ï¼Œ${drink_addtions}${drink_milk == '' ? '' : 'ï¼Œ' + drink_milk}ï¼Œ${drink_price}
                </td>
            </tr>`;
            order_total += parseInt(drink_price.replace(/[^\d]/g, ''));
            drink_ck = true;
        }
        $("#order_list_ul").html(order_list_html);

        // å¡«å…¥ç¸½é‡‘é¡
        $("#order_total").text(order_total);
    })
    //-----------------------------------------------------------------------------------------
    // é€å‡ºè¨‚å–®
    //-----------------------------------------------------------------------------------------
    function Confirm(buttom) {
        var modal = $(buttom).parents(".modal");
        // æª¢æŸ¥æ˜¯å¦éƒ½æœ‰å¡«
        var order_floor = $("#select_floor").combobox("getValue");
        var order_name = $("#select_name").combobox("getValue");
        var order_food = !food_ck ? false : food_ck;
        var order_drink = !drink_ck ? false : drink_ck;
        if (!order_floor || !order_name || !order_food || !order_drink) {
            Swal.fire({
                title: "è«‹å‹™å¿…å¡«å¯«å®Œæ•´",
                icon: "warning"
            });
            return;
        }
        Swal.fire({
            title: "ç¢ºå®šè¦é€å‡ºè¨‚å–®?",
            icon: "question",
            html: `ç¢ºå®šè¦é€å‡º <span style="font-weight:bold">${order_floor}-${order_name} </span> çš„è¨‚å–®å—? <br/><span style="color:red">(ä¸è¦é»éŒ¯äººå–”)<span>`,
            showCancelButton: true,
            confirmButtonText: "ç¢ºå®š",
        }).then((result) => {
            if (result.isConfirmed) {
                order_food = $("#order_food").text();
                order_drink = $("#order_drink").text().replace(/\s+/g, ' ');;
                total = $("#order_total").text();

                var form_data = {
                    creatd_at: showDate(new Date()),
                    order_floor: order_floor,
                    order_name: order_name,
                    order_food: order_food,
                    order_drink: order_drink,
                    total: total,
                };
                InsertGasData("12æœˆè¡¨å–®å›æ‡‰", form_data);
                Swal.fire("é€å‡ºæˆåŠŸ", "", "success");
                localStorage.clear(); // é€å‡ºå¾Œæ¸…ç©ºç´€éŒ„
                // é—œé–‰modal
                $("#cart_form").modal("toggle");
            }
        });
    }
</script>

</html>